{"ast":null,"code":"import _slicedToArray from \"/home/ale/Desktop/covid/daily-covid-news/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/ale/Desktop/covid/daily-covid-news/web/src/components/searchNews.js\";\nimport React, { useState } from \"react\";\nimport moment from \"moment\";\nimport MaterialTable, { MTableEditField } from \"material-table\";\nimport Form from \"./form\";\nimport { connect } from \"react-redux\";\nimport api from \"./utils/api\";\nimport instance from \"./utils/http\";\nimport { setSearchNews } from \"./actions/index\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { withRouter } from \"react-router-dom\";\nimport { useSnackbar } from \"notistack\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nconst useStyles = makeStyles(theme => ({\n  dialog: {\n    padding: 0,\n    margin: \"0px auto\",\n    background: \"blue\"\n  }\n}));\n\nconst SearchNews = props => {\n  const classes = useStyles();\n  const reset = props.reset,\n        submitting = props.submitting,\n        event = props.event,\n        errors = props.errors,\n        touched = props.touched,\n        task = props.task,\n        history = props.history,\n        searchNew = props.searchNew;\n\n  const _React$useState = React.useState(false),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        open = _React$useState2[0],\n        setOpen = _React$useState2[1];\n\n  const _useSnackbar = useSnackbar(),\n        enqueueSnackbar = _useSnackbar.enqueueSnackbar,\n        closeSnackbar = _useSnackbar.closeSnackbar;\n\n  const _React$useState3 = React.useState({\n    search: \"\",\n    category: \"\",\n    providers: \"\",\n    startDate: \"\",\n    endDate: \"\"\n  }),\n        _React$useState4 = _slicedToArray(_React$useState3, 2),\n        searchNews = _React$useState4[0],\n        setSearchNews = _React$useState4[1];\n\n  const _useState = useState(\"\"),\n        _useState2 = _slicedToArray(_useState, 2),\n        provider = _useState2[0],\n        setProvider = _useState2[1];\n\n  const handleOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const handleSubmit = () => {\n    if (searchNews.providers === \"Clarin\") {\n      setProvider(\"Clarín\");\n    }\n\n    if (searchNews.providers === \"Pagina12\") {\n      setProvider(\"Página 12\");\n    }\n\n    if (searchNews.providers === \"LaNacion\") {\n      setProvider(\"La%20Nación\");\n    }\n\n    if (searchNews.providers === \"Telam\") {\n      setProvider(\"Télam\");\n    }\n\n    const token = localStorage.getItem(\"token\");\n    const options = {\n      headers: {\n        \"Content-Type\": \"multipart/form-data\",\n        Authorization: \"Bearer \" + \"\".concat(token)\n      }\n    };\n    debugger;\n    return instance.get(\"/news?providers=\".concat(searchNews.providers, \"&search=\").concat(searchNews.search, \"&searchindataclass=\").concat(provider, \"&categories=\").concat(searchNews.category, \"&startDate=\").concat(searchNews.startDate, \"&endDate=\").concat(searchNews.endDate, \"&order=-1\")).then(result => {\n      props.setSearchNews(result.data);\n      enqueueSnackbar(\"La Busqueda fue realizada con exito\", {\n        variant: \"success\"\n      });\n      setOpen(false);\n      history.push(\"/search\");\n    }).catch(response => {\n      enqueueSnackbar(\"Error, La busqueda no se realizo. \" + response, {\n        variant: \"error\"\n      });\n      console.error(\"Mutation error:\", response);\n    });\n  };\n\n  const body = React.createElement(Form, {\n    className: classes.dialog,\n    setSearchNews: setSearchNews,\n    data: searchNews,\n    handleClose: handleClose,\n    handleSubmit: handleSubmit,\n    setProvider: setProvider,\n    provider: provider,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  });\n  const modalSelect = React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, React.createElement(Dialog, {\n    open: open // onClose={handleClose}\n    ,\n    BackdropProps: {\n      timeout: 500\n    },\n    \"aria-labelledby\": \"simple-modal-title\",\n    \"aria-describedby\": \"simple-modal-description\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, body)));\n  return React.createElement(React.Fragment, null, modalSelect, \" \", React.createElement(IconButton, {\n    className: classes.search,\n    \"aria-label\": \"search\",\n    color: \"inherit\",\n    onClick: () => setOpen(true),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }, React.createElement(SearchIcon, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  })));\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    setSearchNews: search => dispatch(setSearchNews(search))\n  };\n};\n\nexport default connect(null, mapDispatchToProps)(withRouter(SearchNews));","map":{"version":3,"sources":["/home/ale/Desktop/covid/daily-covid-news/web/src/components/searchNews.js"],"names":["React","useState","moment","MaterialTable","MTableEditField","Form","connect","api","instance","setSearchNews","makeStyles","withRouter","useSnackbar","Dialog","IconButton","SearchIcon","useStyles","theme","dialog","padding","margin","background","SearchNews","props","classes","reset","submitting","event","errors","touched","task","history","searchNew","open","setOpen","enqueueSnackbar","closeSnackbar","search","category","providers","startDate","endDate","searchNews","provider","setProvider","handleOpen","handleClose","handleSubmit","token","localStorage","getItem","options","headers","Authorization","get","then","result","data","variant","push","catch","response","console","error","body","modalSelect","timeout","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport moment from \"moment\";\nimport MaterialTable, { MTableEditField } from \"material-table\";\nimport Form from \"./form\";\nimport { connect } from \"react-redux\";\nimport api from \"./utils/api\";\nimport instance from \"./utils/http\";\nimport { setSearchNews } from \"./actions/index\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { withRouter } from \"react-router-dom\";\nimport { useSnackbar } from \"notistack\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport SearchIcon from \"@material-ui/icons/Search\";\n\nconst useStyles = makeStyles((theme) => ({\n  dialog: {\n    padding: 0,\n    margin: \"0px auto\",\n    background: \"blue\",\n  },\n}));\nconst SearchNews = (props) => {\n  const classes = useStyles();\n  const {\n    reset,\n    submitting,\n    event,\n    errors,\n    touched,\n    task,\n    history,\n    searchNew,\n  } = props;\n  const [open, setOpen] = React.useState(false);\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar();\n  const [searchNews, setSearchNews] = React.useState({\n    search: \"\",\n    category: \"\",\n    providers: \"\",\n    startDate: \"\",\n    endDate: \"\",\n  });\n  const [provider, setProvider] = useState(\"\");\n  const handleOpen = () => {\n    setOpen(true);\n  };\n  const handleClose = () => {\n    setOpen(false);\n  };\n  const handleSubmit = () => {\n    if (searchNews.providers === \"Clarin\") {\n      setProvider(\"Clarín\");\n    }\n    if (searchNews.providers === \"Pagina12\") {\n      setProvider(\"Página 12\");\n    }\n    if (searchNews.providers === \"LaNacion\") {\n      setProvider(\"La%20Nación\");\n    }\n    if (searchNews.providers === \"Telam\") {\n      setProvider(\"Télam\");\n    }\n    const token = localStorage.getItem(\"token\");\n    const options = {\n      headers: {\n        \"Content-Type\": \"multipart/form-data\",\n        Authorization: \"Bearer \" + `${token}`,\n      },\n    };\n    debugger;\n    return instance\n      .get(\n        `/news?providers=${searchNews.providers}&search=${searchNews.search}&searchindataclass=${provider}&categories=${searchNews.category}&startDate=${searchNews.startDate}&endDate=${searchNews.endDate}&order=-1`\n      )\n      .then((result) => {\n        props.setSearchNews(result.data);\n        enqueueSnackbar(\"La Busqueda fue realizada con exito\", {\n          variant: \"success\",\n        });\n        setOpen(false);\n        history.push(\"/search\");\n      })\n      .catch((response) => {\n        enqueueSnackbar(\"Error, La busqueda no se realizo. \" + response, {\n          variant: \"error\",\n        });\n        console.error(\"Mutation error:\", response);\n      });\n  };\n  const body = (\n    <Form\n      className={classes.dialog}\n      setSearchNews={setSearchNews}\n      data={searchNews}\n      handleClose={handleClose}\n      handleSubmit={handleSubmit}\n      setProvider={setProvider}\n      provider={provider}\n    ></Form>\n  );\n  const modalSelect = (\n    <div>\n      <Dialog\n        open={open}\n        // onClose={handleClose}\n        BackdropProps={{\n          timeout: 500,\n        }}\n        aria-labelledby=\"simple-modal-title\"\n        aria-describedby=\"simple-modal-description\"\n      >\n        <div>{body}</div>\n      </Dialog>\n    </div>\n  );\n  return (\n    <>\n      {modalSelect}{\" \"}\n      <IconButton\n        className={classes.search}\n        aria-label=\"search\"\n        color=\"inherit\"\n        onClick={() => setOpen(true)}\n      >\n        <SearchIcon />\n      </IconButton>\n    </>\n  );\n};\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    setSearchNews: (search) => dispatch(setSearchNews(search)),\n  };\n};\n\nexport default connect(null, mapDispatchToProps)(withRouter(SearchNews));\n"]},"metadata":{},"sourceType":"module"}